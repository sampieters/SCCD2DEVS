<?xml version="1.1" ?>
<diagram author="Sam Pieters" name="Multiple Output Test">
    <description>
        Test 3: Check if the model outputs multiple events with an interval on the right time.
    </description>
    <inport name="ui"/>
    <outport name="ui"/>
    <class name="MainApp" default="true">
        <constructor>
            <body>
                self.amount = 1
            </body> 
        </constructor>
        <scxml initial="state1">
            <state id="state1">
                <transition after="1" target="../state2" />
            </state>
            <state id="state2">
                <onentry>
                    <raise port="ui" event="test_event">
                        <parameter expr="str(self.amount)" />
                        <parameter expr="str('%.2f' % (self.getSimulatedTime() / 1000.0))" />
                    </raise>
                </onentry>
                <transition target="../state1" cond="self.amount != 5">
                    <script>
                        self.amount += 1
                    </script>
                </transition>
                <transition target="../end" cond="self.amount == 5">
                </transition>
            </state>
            <state id="end">
            </state>
        </scxml>
    </class>
</diagram>